#!/bin/bash

# Clean stale data in GeoServer, GeoNetwork and Django.
risiko clean

# Start GeoNode servers in silent mode
risiko start

# Show code quality
risiko-lint

# Give GeoServer time to boot
sleep 30

# Run unit tests
if [ $# -eq 0 ];then
    args="risiko impact"
else
    args=$@
fi

risiko test $args --noinput

# Stop GeoNode
risiko stop
